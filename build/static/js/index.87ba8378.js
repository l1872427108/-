(function(e){function t(t){for(var r,o,i=t[0],u=t[1],s=t[2],l=0,f=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(f.length)f.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={index:0},a={index:0},c=[];function i(e){return u.p+"static/js/"+({}[e]||e)+"."+{"chunk-2d0b381b":"125cf3b9","chunk-2d0d6f32":"355e3a22","chunk-4610c148":"80d47448"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-4610c148":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="static/css/"+({}[e]||e)+"."+{"chunk-2d0b381b":"31d6cfe0","chunk-2d0d6f32":"31d6cfe0","chunk-4610c148":"9d998ace"}[e]+".css",a=u.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===a))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){s=f[i],l=s.getAttribute("data-href");if(l===r||l===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete o[e],d.parentNode.removeChild(d),n(c)},d.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var f=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",f.name="ChunkLoadError",f.type=r,f.request=o,n[1](f)}a[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/production/api/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var d=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0be6":function(e,t,n){},"0f9a":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("498a");var r=n("5530"),o=n("cebe"),a=n.n(o),c=n("5d2d"),i=n("5f72"),u=null,s=0,l=function(){u=i["Loading"].service({lock:!0,text:"加载中...",background:"rgba(0, 0, 0, .05)"})},f=function(){u.close()},d=function(){0===s&&l(),s+=1},p=function(){s<=0||(s-=1,0===s&&f())},m=n("4328"),v=n.n(m),g=a.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/production/api/"}).VUE_APP_BASE_API,timeout:5e3});g.interceptors.request.use((function(e){console.log(e),d();var t=Object(r["a"])(Object(r["a"])({},e),{},{url:"".concat(e.url),headers:{"Access-Token":Object(c["a"])("token")}});return"get"===t.method&&(t.paramsSerializer=function(e){return v.a.stringify(e,{arrayFormat:"repeat"})}),t})),g.interceptors.response.use((function(e){p();var t=e.data;return 2e4!==t.code?(Object(i["Message"])({message:t.message||"Error",type:"error",duration:5e3}),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return p(),console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var h=g;function b(e){return h({url:"/vue-element-admin/user/login",method:"post",data:e})}function y(e){return h({url:"/vue-element-admin/user/info",method:"get",params:{token:e}})}function E(){return h({url:"/vue-element-admin/user/logout",method:"post"})}var k=n("5f87"),O=n("a18c"),j={token:Object(k["a"])(),roles:[]},w={SET_TOKEN:function(e,t){e.token=t},SET_ROLES:function(e,t){e.roles=t}},x={login:function(e,t){var n=e.commit,r=t.username,o=t.password;return new Promise((function(e,t){b({username:r.trim(),password:o}).then((function(t){var r=t.data;n("SET_TOKEN",r.token),Object(k["c"])(r.token),e()})).catch((function(e){t(e)}))}))},getInfo:function(e){var t=e.commit,n=e.state;return new Promise((function(e,r){y(n.token).then((function(n){var o=n.data;o||r("Verification failed, please Login again.");var a=o.roles;(!a||a.length<=0)&&r("roles must be a non-null array!"),t("SET_ROLES",a),e(o)})).catch((function(e){r(e)}))}))},logout:function(e){var t=e.commit,n=e.state,r=e.dispatch;return new Promise((function(e,o){E(n.token).then((function(){t("SET_TOKEN",""),t("SET_ROLES",[]),Object(k["b"])(),Object(O["d"])(),r("tagsView/delAllViews",null,{root:!0}),e()})).catch((function(e){o(e)}))}))},resetToken:function(e){var t=e.commit;return new Promise((function(e){t("SET_TOKEN",""),t("SET_ROLES",[]),Object(k["b"])(),e()}))}};t["default"]={namespaced:!0,state:j,mutations:w,actions:x}},"280c":function(e,t,n){"use strict";n.r(t);var r={bind:function(e,t){var n=t.value;console.log("copy=>",e),e.$value=n,e.handler=function(){if(e.$value){var t=document.createElement("textarea");t.readOnly="readonly",t.style.position="absolute",t.style.left="-9999px",t.value=e.$value,document.body.appendChild(t),t.select();var n=document.execCommand("Copy",!0,null);n&&console.log("复制成功"),document.body.removeChild(t)}else console.log("无复制的内容")},e.addEventListener("click",e.handler)},inserted:function(e){console.log("copy=>",e)},update:function(){console.log("update")},componentUpdated:function(e,t){var n=t.value;console.log("=>",n),e.$value=n,console.log(e)},unbind:function(e){e.removeEventListener("click",e.handler)}};t["default"]=r},"2b93":function(e,t,n){"use strict";n.r(t);n("caad"),n("2532");var r=n("4360");function o(e,t){var n=t.value,o=r["a"].getters&&r["a"].getters.roles;if(!(n&&n instanceof Array))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");if(n.length>0){var a=n,c=o.some((function(e){return a.includes(e)}));c||e.parentNode&&e.parentNode.removeChild(e)}}var a={inserted:function(e,t){console.log(e,t),o(e,t)},update:function(e,t){o(e,t)}};t["default"]=a},"2de0":function(e,t){},"2f46":function(e,t,n){n("ac1f"),n("5319")},"31c2":function(e,t,n){"use strict";n.r(t),n.d(t,"filterAsyncRoutes",(function(){return c}));var r=n("5530"),o=(n("caad"),n("2532"),n("159b"),n("99af"),n("d3b7"),n("a18c"));function a(e,t){return!t.meta||!t.meta.roles||e.some((function(e){return t.meta.roles.includes(e)}))}function c(e,t){var n=[];return e.forEach((function(e){var o=Object(r["a"])({},e);a(t,o)&&(o.children&&(o.children=c(o.children,t)),n.push(o))})),n}var i={routes:[],addRoutes:[]},u={SET_ROUTES:function(e,t){e.addRoutes=t,e.routes=o["c"].concat(t)}},s={generateRoutes:function(e,t){var n=e.commit;return new Promise((function(e){var r;r=t.includes("admin")?o["a"]||[]:c(o["a"],t),n("SET_ROUTES",r),e(r)}))}};t["default"]={namespaced:!0,state:i,mutations:u,actions:s}},"3d09":function(e,t,n){"use strict";function r(e,t,n,r){var o=document.createElement("canvas");t.appendChild(o),o.width=200,o.height=150,o.style.display="none";var a=o.getContext("2d");a.rotate(-20*Math.PI/180),a.font=n||"16px Microsoft JhengHei",a.fillStyle=r||"rgba(180, 180, 180, 0.3)",a.textAlign="left",a.textBaseline="Middle",a.fillText(e,o.width/10,o.height/2),t.style.backgroundImage="url("+o.toDataURL("image/png")+")"}n.r(t);var o={bind:function(e,t){r(t.value.text,e,t.value.font,t.value.textColor)}};t["default"]=o},4360:function(e,t,n){"use strict";n("d3b7"),n("ddb0"),n("ac1f"),n("5319");var r=n("8bbf"),o=n.n(r),a=n("5880"),c=n.n(a),i={token:function(e){return e.user.token},roles:function(e){return e.user.roles},routes:function(e){return e.permission.routes}},u=i;o.a.use(c.a);var s=n("c653"),l=s.keys().reduce((function(e,t){var n=t.replace(/^\.\/(.*)\.\w+$/,"$1"),r=s(t);return e[n]=r.default,e}),{});t["a"]=new c.a.Store({modules:l,getters:u})},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("159b"),n("ac1f"),n("5319");var r=n("8bbf"),o=n.n(r),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"main"},[e.getKeepAlive?n("keep-alive",[n("router-view",{staticClass:"router-view"})],1):n("router-view",{staticClass:"router-view"})],1)])},c=[],i={data:function(){return{value:new Date}},computed:{getKeepAlive:{get:function(){return this.$route.meta.keepAlive}}},mounted:function(){},methods:{btn:function(){var e=this;this.$alert("这是一段内容","标题名称",{confirmButtonText:"确定",callback:function(t){e.$message({type:"info",message:"action: ".concat(t)})}})}}},u=i,s=(n("d1fe"),n("2877")),l=Object(s["a"])(u,a,c,!1,null,"fb672e74",null),f=l.exports,d=n("a18c"),p=n("4360"),m=n("5530"),v=n("a925"),g=n("b2d6"),h=n.n(g),b=n("f0d9"),y=n.n(b),E={Title:"平台"},k={title:"framework"},O=n("5d2d"),j=n("4897"),w=n.n(j);o.a.use(v["a"]);var x={en:Object(m["a"])(Object(m["a"])({},k),h.a),zh:Object(m["a"])(Object(m["a"])({},E),y.a)},_=new v["a"]({locale:Object(O["a"])("language")||"zh",messages:x});w.a.i18n((function(e,t){return _.t(e,t)}));var L=_,T=function(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e;var n=document.getElementsByTagName("head")[0];n.appendChild(t)},S=["2758535_q3uci30o8v"],A="//at.alicdn.com/t/font_$key.css",C={iconfontVersion:S,iconfontUrl:A},R=(n("d3b7"),n("ddb0"),n("a15b"),n("d81d"),n("1276"),n("fb6a"),n("f93b"));R.keys().forEach((function(e){var t=R(e),n=e.replace(/^\.\/_/,"").replace(/\.\w+$/,"").split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");console.log(n),o.a.component(n,t.default||t)})),o.a.config.errorHandler=function(e,t,n){o.a.nextTick((function(){p["a"].commit("logs/ADD_LOGS",{type:"error",message:e.message,stack:e.stack,info:n})}))};var M=!1;o.a.config.silent=M,o.a.config.devtools=M,o.a.config.ignoredElements=[""],o.a.config.productionTip=M,o.a.config.performance=!0,o.a.config.keyCodes={};n("b20f");var N=n("1da1"),P=(n("96cf"),n("5f72")),$=n("5f87"),U=["/login"];d["b"].beforeEach(function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(t,n,r){var o,a,c,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=Object($["a"])(),console.log(o),!o){e.next=33;break}if("/login"!==t.path){e.next=7;break}r({path:"/"}),e.next=31;break;case 7:if(p["a"].getters.roles.some((function(e){return"admin"===e})),a=p["a"].getters.roles&&p["a"].getters.roles.length>0,!a){e.next=13;break}r(),e.next=31;break;case 13:return e.prev=13,e.next=16,p["a"].dispatch("user/getInfo");case 16:return c=e.sent,i=c.roles,e.next=20,p["a"].dispatch("permission/generateRoutes",i);case 20:u=e.sent,u.forEach((function(e){d["b"].addRoute(Object(m["a"])({},e))})),r(Object(m["a"])(Object(m["a"])({},t),{},{replace:!0})),e.next=31;break;case 25:return e.prev=25,e.t0=e["catch"](13),e.next=29,p["a"].dispatch("user/resetToken");case 29:P["Message"].error(e.t0||"Has Error"),r("/login");case 31:e.next=34;break;case 33:-1!==U.indexOf(t.path)?r():r("/login");case 34:case"end":return e.stop()}}),e,null,[[13,25]])})));return function(t,n,r){return e.apply(this,arguments)}}());var D=n("e006");D.keys().forEach((function(e){var t=D(e),n=e.replace(/^\.\//,"").replace(/\.\w+$/,"").split("_directive-").join("");o.a.directive(n,t.default||t)})),C.iconfontVersion.forEach((function(e){T(C.iconfontUrl.replace("$key",e))})),new o.a({router:d["b"],store:p["a"],i18n:L,render:function(e){return e(f)}}).$mount("#app")},5880:function(e,t){e.exports=Vuex},"5d2d":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r=function(e,t){return localStorage.setItem(e,t)},o=function(e){return localStorage.getItem(e)}},"5f72":function(e,t){e.exports=ELEMENT},"5f87":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u}));var r=n("852e"),o=n.n(r),a="Admin-Token";function c(){return o.a.get(a)}function i(e){return o.a.set(a,e)}function u(){return o.a.remove(a)}},6389:function(e,t){e.exports=VueRouter},7454:function(e,t,n){"use strict";n.r(t);var r={inserted:function(e,t){var n=null;console.log(e),e.addEventListener("keyup",(function(){n&&clearTimeout(n),n=setTimeout((function(){t.value()}),1e3)}))}};t["default"]=r},"887b":function(e,t){},"8bbf":function(e,t){e.exports=Vue},"8e9e":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("25f0"),n("ac1f"),n("5319"),n("4d63");var r=function(e){var t="yyyy-MM-dd hh:mm:ss";if("Invalid Date"!==e){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t}return""},o=n("5d2d"),a={logsList:Object(o["a"])("logsList")||[]},c={ADD_LOGS:function(e,t){var n=t.type,a=t.message,c=t.stack,i=t.info;e.logsList.push(Object.assign({url:window.location.href,time:r(new Date)},{type:n,message:a,stack:c,info:i.toString()})),Object(o["b"])("logsList",e.logsList)},CLEAR_LOGS:function(e){e.logsList=[],Object(o["b"])("logsList",e.logsList)}};t["default"]={namespaced:!0,state:a,mutations:c}},a18c:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return f}));n("d3b7"),n("3ca3"),n("ddb0");var r=n("8bbf"),o=n.n(r),a=n("6389"),c=n.n(a);o.a.use(c.a);var i=[{path:"/login",component:function(){return n.e("chunk-4610c148").then(n.bind(null,"9ed6"))}},{path:"/",component:function(){return n.e("chunk-2d0d6f32").then(n.bind(null,"7575"))}}],u=[{path:"/admin",component:function(){return n.e("chunk-2d0b381b").then(n.bind(null,"2953"))},meta:{title:"Role Permission",roles:["admin"]}}],s=function(){return new c.a({scrollBehavior:function(){return{y:0}},routes:i,mode:"history"})},l=s(),f=function(){var e=s();l.matcher=e.matcher},d=c.a.prototype.push;c.a.prototype.push=function(e){return d.call(this,e).catch((function(e){return e}))},t["b"]=l},b20f:function(e,t,n){},c459:function(e,t,n){"use strict";n.r(t);var r=n("5d2d"),o={language:Object(r["a"])("language")||"zh"},a={SET_LANGUAGE:function(e,t){e.language=t,Object(r["b"])("language",e.language)}};t["default"]={namespaced:!0,state:o,mutations:a}},c653:function(e,t,n){var r={"./common.js":"c459","./logs.js":"8e9e","./permission.js":"31c2","./user.js":"0f9a"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="c653"},cebe:function(e,t){e.exports=axios},d1fe:function(e,t,n){"use strict";n("0be6")},d911:function(e,t,n){"use strict";n.r(t);var r={bind:function(e,t,n){if("function"!==typeof t.value)throw"callback must be a function";var r=null,o=function(e){"click"===e.type&&0!==e.button||null===r&&(r=setTimeout((function(){c()}),2e3))},a=function(e){null!==r&&(clearTimeout(r),r=null)},c=function(e){t.value(e)};e.addEventListener("mousedown",o),e.addEventListener("touchstart",o),e.addEventListener("click",a),e.addEventListener("mouseout",a),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a)},componentUpdated:function(e,t){var n=t.value;e.$value=n},unbind:function(e){e.removeEventListener("click",e.handler)}};t["default"]=r},e006:function(e,t,n){var r={"./_directive-copy.js":"280c","./_directive-debounce.js":"7454","./_directive-draggable.js":"887b","./_directive-emoji.js":"2f46","./_directive-lazyload.js":"2de0","./_directive-longpress.js":"d911","./_directive-permission.js":"2b93","./_directive-watermarker.js":"3d09"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="e006"},f93b:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="f93b"}});